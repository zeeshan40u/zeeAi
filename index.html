<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>ZeeAi 1.2</title>

<link rel="icon" type="image/jpeg" href="https://image.jimcdn.com/app/cms/image/transf/none/path/s87e10734edef81fd/image/ic057f555847bdd10/version/1757224479/image.jpg">
<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#00ff55">

<style>
  /* â€¦your existing CSSâ€¦ */

  /* Animated install button */
  #installBtn {
    position: fixed;
    bottom: 20px;
    right: 20px;
    padding: 15px 30px;
    font-size: 1.2rem;
    font-weight: bold;
    border: none;
    border-radius: 25px;
    color: #fff;
    cursor: pointer;
    background: linear-gradient(45deg, #ff00ff, #ff9900, #00ffff);
    background-size: 600% 600%;
    animation: bgMove 5s ease infinite, pulse 2s infinite, spin 6s linear infinite;
    box-shadow: 0 0 20px rgba(255, 0, 255, 0.7),
                0 0 40px rgba(0, 255, 255, 0.6);
    z-index: 9999;
    display:none; /* hidden until beforeinstallprompt fires */
  }

  @keyframes bgMove {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
  }

  @keyframes pulse {
    0% { transform: scale(1); }
    50% { transform: scale(1.2); }
    100% { transform: scale(1); }
  }

  @keyframes spin {
    0% { filter: hue-rotate(0deg); }
    100% { filter: hue-rotate(360deg); }
  }

  #installBtn:active {
    transform: scale(1.3) rotate(5deg);
  }
</style>
</head>
<body>
  <button id="themeToggle" aria-label="Toggle theme" title="Toggle theme">
    <!-- â€¦ your icons â€¦ -->
  </button>
  <div class="tooltip" id="tooltipText">Toggle to Light</div>

  <div class="page">
    <div class="content">
      <h1 class="heading">ZeeAi 1.2</h1>

      <div class="container">
        <input id="txt" placeholder="Enter text" aria-label="Enter text" />
        <button class="enter" id="speakBtn">Speak</button>
      </div>
    </div>
  </div>

  <p class="textbyme">Text To Speech Generator Made By Zeeshan Khan</p>

  <!-- Added install button -->
  <button id="installBtn">ðŸŒˆðŸš€ Install App ðŸš€ðŸŒˆ</button>

<script>
if ('serviceWorker' in navigator) {
  navigator.serviceWorker.register('service-worker.js').catch(()=>{});
}

const themeToggle = document.getElementById('themeToggle');
const tooltip = document.getElementById('tooltipText');
const sunIcon = document.getElementById('sunIcon');
const moonIcon = document.getElementById('moonIcon');
const speakBtn = document.getElementById('speakBtn');
const txtInput = document.getElementById('txt');

// default dark
document.body.classList.remove('light');
updateThemeUI();

function updateThemeUI(){
  const isLight = document.body.classList.contains('light');
  if (sunIcon && moonIcon) {
    sunIcon.style.display = isLight ? 'none' : 'block';
    moonIcon.style.display = isLight ? 'block' : 'none';
  }
  tooltip.textContent = isLight ? 'Toggle to Dark' : 'Toggle to Light';
  const meta = document.querySelector('meta[name="theme-color"]');
  if (meta) meta.setAttribute('content', isLight ? '#0066ff' : '#00ff55');
}
themeToggle.addEventListener('click', () => {
  document.body.classList.toggle('light');
  updateThemeUI();
  tooltip.style.display='block';
  setTimeout(()=>tooltip.style.display='none',1400);
});
themeToggle.addEventListener('mouseenter', ()=> tooltip.style.display = 'block');
themeToggle.addEventListener('mouseleave', ()=> tooltip.style.display = 'none');

let isSpeaking = false;
let currentUtterance = null;

function speakHandler(){
  const inputText = txtInput.value || '';
  if (isSpeaking) {
    window.speechSynthesis.cancel();
    resetSpeakingState();
    return;
  }
  if (!inputText.trim()){
    alert('Please enter some text!');
    return;
  }

  currentUtterance = new SpeechSynthesisUtterance(inputText);
  currentUtterance.onstart = () => {
    isSpeaking = true;
    speakBtn.textContent = 'Stop';
  };
  currentUtterance.onend = () => { resetSpeakingState(); };
  currentUtterance.onerror = () => { resetSpeakingState(); };

  window.speechSynthesis.speak(currentUtterance);
}

function resetSpeakingState(){
  isSpeaking = false;
  speakBtn.textContent = 'Speak';
  currentUtterance = null;
}

speakBtn.addEventListener('click', speakHandler);
txtInput.addEventListener('keypress', (e) => {
  if (e.key === 'Enter') {
    e.preventDefault();
    speakHandler();
  }
});

/* === PWA Install Button Logic === */
let deferredPrompt;
const installBtn = document.getElementById('installBtn');

// listen for beforeinstallprompt
window.addEventListener('beforeinstallprompt', (e) => {
  e.preventDefault();
  deferredPrompt = e;
  installBtn.style.display = 'block';
});

// click handler
installBtn.addEventListener('click', async () => {
  if (deferredPrompt) {
    deferredPrompt.prompt();
    const choiceResult = await deferredPrompt.userChoice;
    console.log('User choice:', choiceResult.outcome);
    deferredPrompt = null;
    installBtn.style.display = 'none';
  } else {
    alert('Install prompt not available yet!');
  }
});
</script>
</body>
</html>



